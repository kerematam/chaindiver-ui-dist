import{g as ge,a as ye,s as j,c,r as h,u as xe,J as Qe,K as Ve,_ as ae,M as Ge,N as Je,O as be,j as I,e as se,f as Ce,Q as ke,S as ze,U as he,V as Ze,W as Ee,i as G,X as Xe,Y as Ye,Z as Le,$ as He,a0 as et,a1 as V,t as tt,w as nt}from"./index-BRJjWnub.js";function rt(e){return ye("MuiCollapse",e)}ge("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ot=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],st=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return Ce(r,rt,n)},at=j("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>c({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&c({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),it=j("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>c({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),lt=j("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>c({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),ct=h.forwardRef(function(t,n){const r=xe({props:t,name:"MuiCollapse"}),{addEndListener:o,children:s,className:p,collapsedSize:i="0px",component:E,easing:v,in:C,onEnter:w,onEntered:g,onEntering:l,onExit:d,onExited:S,onExiting:P,orientation:m="vertical",style:u,timeout:f=Qe.standard,TransitionComponent:R=Ve}=r,W=ae(r,ot),M=c({},r,{orientation:m,collapsedSize:i}),T=st(M),k=Ge(),$=Je(),y=h.useRef(null),F=h.useRef(),H=typeof i=="number"?`${i}px`:i,K=m==="horizontal",_=K?"width":"height",O=h.useRef(null),ee=be(n,O),A=a=>z=>{if(a){const N=O.current;z===void 0?a(N):a(N,z)}},J=()=>y.current?y.current[K?"clientWidth":"clientHeight"]:0,te=A((a,z)=>{y.current&&K&&(y.current.style.position="absolute"),a.style[_]=H,w&&w(a,z)}),Q=A((a,z)=>{const N=J();y.current&&K&&(y.current.style.position="");const{duration:B,easing:q}=ke({style:u,timeout:f,easing:v},{mode:"enter"});if(f==="auto"){const x=k.transitions.getAutoHeightDuration(N);a.style.transitionDuration=`${x}ms`,F.current=x}else a.style.transitionDuration=typeof B=="string"?B:`${B}ms`;a.style[_]=`${N}px`,a.style.transitionTimingFunction=q,l&&l(a,z)}),ne=A((a,z)=>{a.style[_]="auto",g&&g(a,z)}),le=A(a=>{a.style[_]=`${J()}px`,d&&d(a)}),ce=A(S),Z=A(a=>{const z=J(),{duration:N,easing:B}=ke({style:u,timeout:f,easing:v},{mode:"exit"});if(f==="auto"){const q=k.transitions.getAutoHeightDuration(z);a.style.transitionDuration=`${q}ms`,F.current=q}else a.style.transitionDuration=typeof N=="string"?N:`${N}ms`;a.style[_]=H,a.style.transitionTimingFunction=B,P&&P(a)}),X=a=>{f==="auto"&&$.start(F.current||0,a),o&&o(O.current,a)};return I.jsx(R,c({in:C,onEnter:te,onEntered:ne,onEntering:Q,onExit:le,onExited:ce,onExiting:Z,addEndListener:X,nodeRef:O,timeout:f==="auto"?null:f},W,{children:(a,z)=>I.jsx(at,c({as:E,className:se(T.root,p,{entered:T.entered,exited:!C&&H==="0px"&&T.hidden}[a]),style:c({[K?"minWidth":"minHeight"]:H},u),ref:ee},z,{ownerState:c({},M,{state:a}),children:I.jsx(it,{ownerState:c({},M,{state:a}),className:T.wrapper,ref:y,children:I.jsx(lt,{ownerState:c({},M,{state:a}),className:T.wrapperInner,children:s})})}))}))});ct.muiSupportAuto=!0;const dt=["onChange","maxRows","minRows","style","value"];function oe(e){return parseInt(e,10)||0}const ut={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function pt(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const ft=h.forwardRef(function(t,n){const{onChange:r,maxRows:o,minRows:s=1,style:p,value:i}=t,E=ae(t,dt),{current:v}=h.useRef(i!=null),C=h.useRef(null),w=be(n,C),g=h.useRef(null),l=h.useRef(null),d=h.useCallback(()=>{const m=C.current,f=ze(m).getComputedStyle(m);if(f.width==="0px")return{outerHeightStyle:0,overflowing:!1};const R=l.current;R.style.width=f.width,R.value=m.value||t.placeholder||"x",R.value.slice(-1)===`
`&&(R.value+=" ");const W=f.boxSizing,M=oe(f.paddingBottom)+oe(f.paddingTop),T=oe(f.borderBottomWidth)+oe(f.borderTopWidth),k=R.scrollHeight;R.value="x";const $=R.scrollHeight;let y=k;s&&(y=Math.max(Number(s)*$,y)),o&&(y=Math.min(Number(o)*$,y)),y=Math.max(y,$);const F=y+(W==="border-box"?M+T:0),H=Math.abs(y-k)<=1;return{outerHeightStyle:F,overflowing:H}},[o,s,t.placeholder]),S=h.useCallback(()=>{const m=d();if(pt(m))return;const u=m.outerHeightStyle,f=C.current;g.current!==u&&(g.current=u,f.style.height=`${u}px`),f.style.overflow=m.overflowing?"hidden":""},[d]);he(()=>{const m=()=>{S()};let u;const f=Ze(m),R=C.current,W=ze(R);W.addEventListener("resize",f);let M;return typeof ResizeObserver<"u"&&(M=new ResizeObserver(m),M.observe(R)),()=>{f.clear(),cancelAnimationFrame(u),W.removeEventListener("resize",f),M&&M.disconnect()}},[d,S]),he(()=>{S()});const P=m=>{v||S(),r&&r(m)};return I.jsxs(h.Fragment,{children:[I.jsx("textarea",c({value:i,onChange:P,ref:w,rows:s,style:p},E)),I.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:l,tabIndex:-1,style:c({},ut.shadow,p,{paddingTop:0,paddingBottom:0})})]})});function ht({props:e,states:t,muiFormControl:n}){return t.reduce((r,o)=>(r[o]=e[o],n&&typeof e[o]>"u"&&(r[o]=n[o]),r),{})}const Oe=h.createContext(void 0);function mt(){return h.useContext(Oe)}function De(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function gt(e,t=!1){return e&&(De(e.value)&&e.value!==""||t&&De(e.defaultValue)&&e.defaultValue!=="")}function yt(e){return ye("MuiInputBase",e)}const me=ge("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),xt=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],bt=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${G(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Ct=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},vt=e=>{const{classes:t,color:n,disabled:r,error:o,endAdornment:s,focused:p,formControl:i,fullWidth:E,hiddenLabel:v,multiline:C,readOnly:w,size:g,startAdornment:l,type:d}=e,S={root:["root",`color${G(n)}`,r&&"disabled",o&&"error",E&&"fullWidth",p&&"focused",i&&"formControl",g&&g!=="medium"&&`size${G(g)}`,C&&"multiline",l&&"adornedStart",s&&"adornedEnd",v&&"hiddenLabel",w&&"readOnly"],input:["input",r&&"disabled",d==="search"&&"inputTypeSearch",C&&"inputMultiline",g==="small"&&"inputSizeSmall",v&&"inputHiddenLabel",l&&"inputAdornedStart",s&&"inputAdornedEnd",w&&"readOnly"]};return Ce(S,yt,t)},wt=j("div",{name:"MuiInputBase",slot:"Root",overridesResolver:bt})(({theme:e,ownerState:t})=>c({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${me.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&c({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),St=j("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Ct})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=c({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),o={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return c({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${me.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${me.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),Rt=I.jsx(Xe,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),It=h.forwardRef(function(t,n){var r;const o=xe({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:p,autoFocus:i,className:E,components:v={},componentsProps:C={},defaultValue:w,disabled:g,disableInjectingGlobalStyles:l,endAdornment:d,fullWidth:S=!1,id:P,inputComponent:m="input",inputProps:u={},inputRef:f,maxRows:R,minRows:W,multiline:M=!1,name:T,onBlur:k,onChange:$,onClick:y,onFocus:F,onKeyDown:H,onKeyUp:K,placeholder:_,readOnly:O,renderSuffix:ee,rows:A,slotProps:J={},slots:te={},startAdornment:Q,type:ne="text",value:le}=o,ce=ae(o,xt),Z=u.value!=null?u.value:le,{current:X}=h.useRef(Z!=null),a=h.useRef(),z=h.useCallback(b=>{},[]),N=be(a,f,u.ref,z),[B,q]=h.useState(!1),x=mt(),D=ht({props:o,muiFormControl:x,states:["color","disabled","error","hiddenLabel","size","required","filled"]});D.focused=x?x.focused:B,h.useEffect(()=>{!x&&g&&B&&(q(!1),k&&k())},[x,g,B,k]);const de=x&&x.onFilled,ue=x&&x.onEmpty,Y=h.useCallback(b=>{gt(b)?de&&de():ue&&ue()},[de,ue]);he(()=>{X&&Y({value:Z})},[Z,Y,X]);const qe=b=>{if(D.disabled){b.stopPropagation();return}F&&F(b),u.onFocus&&u.onFocus(b),x&&x.onFocus?x.onFocus(b):q(!0)},Ue=b=>{k&&k(b),u.onBlur&&u.onBlur(b),x&&x.onBlur?x.onBlur(b):q(!1)},je=(b,...Ie)=>{if(!X){const Me=b.target||a.current;if(Me==null)throw new Error(Ye(1));Y({value:Me.value})}u.onChange&&u.onChange(b,...Ie),$&&$(b,...Ie)};h.useEffect(()=>{Y(a.current)},[]);const Ke=b=>{a.current&&b.currentTarget===b.target&&a.current.focus(),y&&y(b)};let pe=m,L=u;M&&pe==="input"&&(A?L=c({type:void 0,minRows:A,maxRows:A},L):L=c({type:void 0,maxRows:R,minRows:W},L),pe=ft);const _e=b=>{Y(b.animationName==="mui-auto-fill-cancel"?a.current:{value:"x"})};h.useEffect(()=>{x&&x.setAdornedStart(!!Q)},[x,Q]);const re=c({},o,{color:D.color||"primary",disabled:D.disabled,endAdornment:d,error:D.error,focused:D.focused,formControl:x,fullWidth:S,hiddenLabel:D.hiddenLabel,multiline:M,size:D.size,startAdornment:Q,type:ne}),we=vt(re),Se=te.root||v.Root||wt,fe=J.root||C.root||{},Re=te.input||v.Input||St;return L=c({},L,(r=J.input)!=null?r:C.input),I.jsxs(h.Fragment,{children:[!l&&Rt,I.jsxs(Se,c({},fe,!Ee(Se)&&{ownerState:c({},re,fe.ownerState)},{ref:n,onClick:Ke},ce,{className:se(we.root,fe.className,E,O&&"MuiInputBase-readOnly"),children:[Q,I.jsx(Oe.Provider,{value:null,children:I.jsx(Re,c({ownerState:re,"aria-invalid":D.error,"aria-describedby":s,autoComplete:p,autoFocus:i,defaultValue:w,disabled:D.disabled,id:P,onAnimationStart:_e,name:T,placeholder:_,readOnly:O,required:D.required,rows:A,value:Z,onKeyDown:H,onKeyUp:K,type:ne},L,!Ee(Re)&&{as:pe,ownerState:c({},re,L.ownerState)},{ref:N,className:se(we.input,L.className,O&&"MuiInputBase-readOnly"),onBlur:Ue,onChange:je,onFocus:qe}))}),d,ee?ee(c({},D,{startAdornment:Q})):null]}))]})});function Mt(e){return ye("MuiCircularProgress",e)}ge("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const kt=["className","color","disableShrink","size","style","thickness","value","variant"];let ie=e=>e,Pe,Te,$e,Fe;const U=44,zt=Le(Pe||(Pe=ie`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Et=Le(Te||(Te=ie`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Dt=e=>{const{classes:t,variant:n,color:r,disableShrink:o}=e,s={root:["root",n,`color${G(r)}`],svg:["svg"],circle:["circle",`circle${G(n)}`,o&&"circleDisableShrink"]};return Ce(s,Mt,t)},Pt=j("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${G(n.color)}`]]}})(({ownerState:e,theme:t})=>c({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&He($e||($e=ie`
      animation: ${0} 1.4s linear infinite;
    `),zt)),Tt=j("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),$t=j("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${G(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>c({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&He(Fe||(Fe=ie`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Et)),Bt=h.forwardRef(function(t,n){const r=xe({props:t,name:"MuiCircularProgress"}),{className:o,color:s="primary",disableShrink:p=!1,size:i=40,style:E,thickness:v=3.6,value:C=0,variant:w="indeterminate"}=r,g=ae(r,kt),l=c({},r,{color:s,disableShrink:p,size:i,thickness:v,value:C,variant:w}),d=Dt(l),S={},P={},m={};if(w==="determinate"){const u=2*Math.PI*((U-v)/2);S.strokeDasharray=u.toFixed(3),m["aria-valuenow"]=Math.round(C),S.strokeDashoffset=`${((100-C)/100*u).toFixed(3)}px`,P.transform="rotate(-90deg)"}return I.jsx(Pt,c({className:se(d.root,o),style:c({width:i,height:i},P,E),ownerState:l,ref:n,role:"progressbar"},m,g,{children:I.jsx(Tt,{className:d.svg,ownerState:l,viewBox:`${U/2} ${U/2} ${U} ${U}`,children:I.jsx($t,{className:d.circle,style:S,ownerState:l,cx:U,cy:U,r:(U-v)/2,fill:"none",strokeWidth:v})})}))}),Ae="Ask a question about chain data (Fuji C-Chain)",Lt=({onChange:e,value:t,disabled:n,placeholder:r})=>{const o=s=>{if(s.key==="Enter"&&!s.shiftKey){s.preventDefault();const p=s.currentTarget.closest("form");p&&p.requestSubmit()}};return I.jsx(It,{multiline:!0,sx:{ml:1,flex:1},value:t,disabled:n,inputProps:{"aria-label":Ae},onChange:s=>e(s.target.value),onKeyDown:o,placeholder:r||Ae})},Ne={userMessage:null,userMessageId:null,chatId:null,streamedMessage:null,streamedMessageId:null,isLoading:!1,error:null},ve=e=>[`/api/chat/${e}/message`],Ft=({chatId:e,userMessageId:t,message:n})=>{const r=ve(e),o=V.getQueryData(r);o&&V.setQueryData(r,{data:[...o.data,{content:n,id:t,from:"user"}]})},At=({chatId:e,streamedMessageId:t,message:n})=>{const r=ve(e),o=V.getQueryData(r);if(!o)return;if(o.data[o.data.length-1].from==="assistant"){const i=o.data.slice(0,-1);V.setQueryData(r,{data:[...i,{content:n,streamedMessageId:t,from:"assistant"}]})}else V.setQueryData(r,{data:[...o.data,{content:n,streamedMessageId:t,from:"assistant"}]})},Nt=({chatId:e,streamedMessageId:t,assistantMessageId:n})=>{const r=ve(e),o=V.getQueryData(r);if(!o)return;const s=o.data[o.data.length-1];if(s.from!=="assistant"||!s.streamedMessageId||s.id||s.streamedMessageId!==t)return;const p=[...o.data.slice(0,-1),{...s,id:n}];V.setQueryData(r,{data:p})},We=et((e,t)=>({...Ne,actions:{setUserMessage:n=>{e({userMessage:n,isLoading:!0,error:null})},setUserMessageId:n=>{const{chatId:r,userMessage:o}=t();!r||!o||(Ft({chatId:r,userMessageId:n,message:o}),e({userMessageId:n}))},setChatId:n=>{e({chatId:n})},setStreamedMessage:n=>{const{chatId:r,streamedMessage:o,streamedMessageId:s}=t();if(!r)return;const p=s??new Date().getTime().toString(),i=(o||"")+n;At({chatId:r,streamedMessageId:p,message:i}),e({streamedMessage:i,streamedMessageId:p})},setStreamedMessageId:n=>{const{chatId:r}=t();if(!r)return;const{streamedMessageId:o}=t();o&&Nt({chatId:r,streamedMessageId:o,assistantMessageId:n})},reset:()=>{e(Ne)},setError:n=>{e({error:n,isLoading:!1})}}})),Be=({url:e,method:t="POST",onError:n,onSuccess:r,onAbort:o,onEvent:s,eventReducer:p})=>{const i=h.useRef(null),E=async({url:w=e,body:g,method:l=t})=>{var m,u;if(!w)throw new Error("URL is required");i.current=new AbortController;const d=await nt(w,{method:l,body:JSON.stringify(g),signal:(m=i.current)==null?void 0:m.signal}),S=(u=d.body)==null?void 0:u.getReader();if(!S)throw new Error("No reader available");const P=new TextDecoder;for(;;){const{value:f,done:R}=await S.read();if(R)break;P.decode(f).split(`

`).filter(Boolean).forEach(T=>{var F;const k=T.split(`
`),$=k[0].replace("event: ",""),y=k[1].replace("data: ","");s==null||s($,y),(F=p[$])==null||F.call(p,y)})}return r==null||r(d),d};return{request:async w=>{try{return await E(w)}catch(g){n==null||n(g)}},abort:()=>{i.current&&(i.current.abort(),i.current=null,o==null||o())}}};function Ht({onChatCreated:e,onStreamedMessage:t}){const n=We(),r=We(l=>l.actions),o={metadata:l=>{const d=JSON.parse(l);d.chatId!==void 0&&(r.setChatId(d.chatId),e==null||e(d.chatId)),d.userMessageId!==void 0&&r.setUserMessageId(d.userMessageId),d.assistantMessageId!==void 0&&r.setStreamedMessageId(d.assistantMessageId)},content:l=>{const d=JSON.parse(l);r.setStreamedMessage(d),t==null||t(l)}},s=l=>{console.error("Error:",l),r.setError(l.message)},p=()=>{r.reset()},i=()=>{r.reset()},{request:E,abort:v}=Be({url:"/api/chat/stream",method:"POST",eventReducer:o,onError:s,onAbort:p,onSuccess:()=>{i==null||i()}}),{id:C}=tt(),{request:w,abort:g}=Be({url:`/api/chat/${C}/message/stream`,method:"POST",eventReducer:o,onError:s,onAbort:p,onSuccess:()=>{console.log("ON SUCCESS 2"),i==null||i()}});return{createChat:l=>{r.setUserMessage(l),E({body:{content:l}})},abortCreateChat:v,sendMessage:l=>{r.setUserMessage(l),w({body:{content:l}})},abortSendMessage:g,stopChat:v,data:{streamedMessage:n.streamedMessage,chatId:n.chatId},isLoading:n.isLoading,error:n.error,reset:r.reset}}export{ct as C,Ht as a,Lt as b,Bt as c,We as u};
